@model WordMeaning

@{
    ViewData["Title"] = "Select From Definitions";
}

<h1>Select From Definitions</h1>

<div class="row">
    <div class="col-md-10">  <!-- Changed from col-md-4 to col-md-8 -->
        <!-- Search Input -->
        <div class="form-group">
            <label for="searchMeaning" class="control-label">Search Definitions</label>
            <input type="text" id="searchMeaning" class="form-control" placeholder="Type to search..." />
        </div>

        <form asp-action="SelectFromMeaning" asp-route-wordId="@ViewBag.WordId">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>

            <!-- Dropdown for selecting existing meanings -->
            <div class="form-group">
                <label for="MeaningID" class="control-label">Select Existing Meaning</label>
                <select asp-for="MeaningID" 
                        class="form-control" 
                        id="MeaningID" 
                        asp-items="ViewBag.Meanings"
                        size="15"
                        style="height: auto; max-height: 250px; width: 150%; font-size: 1.1em; padding: 8px; min-width: 800px; white-space: nowrap; overflow-x: auto;">
                    <option value="">-- Select Definition --</option>
                </select>
            </div>

            <div class="form-group">
                <input type="submit" value="Create" class="btn btn-primary" />
            </div>
        </form>
    </div>
</div>

<div>
    <a asp-action="Details" asp-route-id="@ViewBag.WordId">Back to Word Details</a>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

    <script>
        $(document).ready(function () {
            // Add custom styling to the select options
            $('#MeaningID option').css({
                'padding': '8px',
                'margin': '2px 0',
                'border-bottom': '1px solid #eee',
                'white-space': 'nowrap'
            });

            // Existing search functionality
            $('#searchMeaning').on('input', function () {
                var searchText = $(this).val().toLowerCase();
                $('#MeaningID option').each(function () {
                    var optionText = $(this).text().toLowerCase();
                    if (optionText.includes(searchText)) {
                        $(this).show();
                    } else {
                        $(this).hide();
                    }
                });
                $('#MeaningID').trigger('change');
            });
        });
    </script>
}